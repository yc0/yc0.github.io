<!DOCTYPE html>





<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.4.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.4.0',
    exturl: false,
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: true,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="Introduction System Designfrom jiuzhang, talk to you how to prepare your system">
<meta name="keywords" content="system design">
<meta property="og:type" content="article">
<meta property="og:title" content="System Design Overview">
<meta property="og:url" content="http://yoursite.com/2019/10/18/System-Design-Overview/index.html">
<meta property="og:site_name" content="YC Note">
<meta property="og:description" content="Introduction System Designfrom jiuzhang, talk to you how to prepare your system">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-10-19T04:32:06.623Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="System Design Overview">
<meta name="twitter:description" content="Introduction System Designfrom jiuzhang, talk to you how to prepare your system">
  <link rel="canonical" href="http://yoursite.com/2019/10/18/System-Design-Overview/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>System Design Overview | YC Note</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">YC Note</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    
      
      
        
          
        
      
        
      
        
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives<span class="badge">6</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    
      
      
        
      
        
      
        
          
        
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags<span class="badge">9</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    
      
      
        
      
        
          
        
      
        
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories<span class="badge">7</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-schedule">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/schedule/" rel="section"><i class="menu-item-icon fa fa-fw fa-calendar"></i> <br>Schedule</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-sitemap">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/sitemap.xml" rel="section"><i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>Sitemap</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
      <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block post">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/18/System-Design-Overview/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nelson">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YC Note">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">System Design Overview

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-10-18 11:11:48" itemprop="dateCreated datePublished" datetime="2019-10-18T11:11:48+08:00">2019-10-18</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-10-19 12:32:06" itemprop="dateModified" datetime="2019-10-19T12:32:06+08:00">2019-10-19</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/system-design/" itemprop="url" rel="index"><span itemprop="name">system design</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/system-design/interview/" itemprop="url" rel="index"><span itemprop="name">interview</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="Introduction-System-Design"><a href="#Introduction-System-Design" class="headerlink" title="Introduction System Design"></a>Introduction System Design</h2><p>from jiuzhang, talk to you how to prepare your system</p>
<a id="more"></a>
<ul>
<li><p>DAU: Daily active user</p>
</li>
<li><p>Infrastructure</p>
</li>
<li><p>Web development</p>
</li>
<li><p>analyst duo dilgence</p>
<ul>
<li>work solution</li>
<li>special case</li>
<li>analysis</li>
<li>tradeoff</li>
<li>knowledge base</li>
</ul>
</li>
<li><p>4s’ analysis</p>
<ul>
<li>scenario</li>
<li>service</li>
<li>storage</li>
<li>scale</li>
</ul>
</li>
<li><p>Design systems v.s. Design portion of systems (limit rate of access rate/statistical history)</p>
</li>
</ul>
<h2 id="Breakdown-The"><a href="#Breakdown-The" class="headerlink" title="Breakdown The"></a>Breakdown The</h2><h3 id="Requirements"><a href="#Requirements" class="headerlink" title="Requirements"></a>Requirements</h3><ul>
<li><p><strong>daily active users</strong></p>
<ul>
<li>login/register</li>
</ul>
</li>
<li><p><strong>user profile</strong></p>
<ul>
<li>display/edit</li>
</ul>
</li>
<li><p><strong>storage</strong></p>
<ul>
<li>database: sql database =&gt; user table</li>
<li>nosql database =&gt; tweets/social graph</li>
</ul>
</li>
<li><p><strong>file system</strong></p>
<ul>
<li>media files</li>
</ul>
</li>
<li><p><strong>cache</strong></p>
<ul>
<li>nonpersistent</li>
</ul>
</li>
</ul>
<h3 id="algorithm-datastructure"><a href="#algorithm-datastructure" class="headerlink" title="algorithm/datastructure"></a>algorithm/datastructure</h3><ul>
<li>merge k sorted arrays</li>
<li>Design user system - database&amp; memcache</li>
<li>design user system - memcached</li>
<li>authentication</li>
<li>sql vs nosql</li>
<li>friendship (MST, kruskal, Prim)</li>
<li>how to scale</li>
<li>sharding/ consistent hashing/ replica</li>
</ul>
<p>user systems features</p>
<ul>
<li>heavy read, light write<ul>
<li>cache</li>
<li>a sort of key-val datastructure, like hashmap in Java</li>
<li>memcached =&gt; non-persistence (high performance)</li>
<li>redis =&gt; persistence (high cluster)</li>
<li>it is not necessary to keep in memory<ul>
<li>file system could be a cache</li>
<li>cpu also has a cache</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cache.get(<span class="string">"this is a key"</span>, <span class="string">"this is a value"</span>)</span><br><span class="line">cache.get(<span class="string">"this is a key"</span>)</span><br></pre></td></tr></table></figure>

<p><code>&gt;&gt; this is a value</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cache.set(<span class="string">"foo"</span>, <span class="number">1</span>, ttl = <span class="number">60</span>) // expired within <span class="number">60</span> sec</span><br><span class="line">cache.get(<span class="string">"foo"</span>)</span><br></pre></td></tr></table></figure>

<p><code>&gt;&gt; 1</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#wait for 60 seconds</span></span><br><span class="line">cache.get(<span class="string">"foo"</span>)</span><br></pre></td></tr></table></figure>

<p><code>&gt;&gt;null</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cache.get(<span class="string">"bar"</span>)</span><br></pre></td></tr></table></figure>

<p><code>&gt;&gt;null</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># memcached optimize the query of DB</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserService</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getUser</span><span class="params">(self, user_id)</span>:</span></span><br><span class="line">        key = <span class="string">"user::%s"</span> % user_id</span><br></pre></td></tr></table></figure>

<h3 id="How-to-keep-login"><a href="#How-to-keep-login" class="headerlink" title="How to keep login?"></a>How to keep login?</h3><h4 id="session-login"><a href="#session-login" class="headerlink" title="session / login"></a>session / login</h4><p>After users login, server will create a session instance, and response <code>session_key</code> as a <code>cookie</code> back to a browser.</p>
<p>The browser will put the records in the cookie. Customers want to request the service every time. The browser will bring the cookie corresponding to the server, and the server will validate the session_key in cookie. If it is valid, the customer is allowed to access the services.</p>
<h4 id="session-logout"><a href="#session-logout" class="headerlink" title="session logout"></a>session logout</h4><p>The server will erase/delete a record from a session table. But where is the session table.</p>
<p>In general, session table is stored in cache. However, it could be better when stored in database. If customers access frequently, try to adopt cache instead.</p>
<h3 id="SQL-v-s-NOSQL"><a href="#SQL-v-s-NOSQL" class="headerlink" title="SQL v.s. NOSQL"></a>SQL v.s. NOSQL</h3><ul>
<li>transaction -&gt; cannot use nosql</li>
<li>sql -&gt; serialization, secondary index and soon</li>
<li>HDrive nosql run 10x+ fast than sql</li>
<li>SQL<ul>
<li>A column is defined by schema with predefinition, and cannot be abitrarily extended. Retrieve record by row</li>
</ul>
</li>
<li>NOSQL, opposite to SQL<ul>
<li>column is dynamic</li>
<li>retrieve data by grid</li>
</ul>
</li>
</ul>

    </div>

    
    
    
        
      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/tags/system-design/" rel="tag"># system design</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2019/10/17/Custom-Class-with-Range-based-Loop-in-C/" rel="next" title="Custom Class with Range-based Loop in C++">
                  <i class="fa fa-chevron-left"></i> Custom Class with Range-based Loop in C++
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          
    
    <div class="comments" id="gitalk-container"></div>
  

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Introduction-System-Design"><span class="nav-number">1.</span> <span class="nav-text">Introduction System Design</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Breakdown-The"><span class="nav-number">2.</span> <span class="nav-text">Breakdown The</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Requirements"><span class="nav-number">2.1.</span> <span class="nav-text">Requirements</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#algorithm-datastructure"><span class="nav-number">2.2.</span> <span class="nav-text">algorithm/datastructure</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#How-to-keep-login"><span class="nav-number">2.3.</span> <span class="nav-text">How to keep login?</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#session-login"><span class="nav-number">2.3.1.</span> <span class="nav-text">session / login</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#session-logout"><span class="nav-number">2.3.2.</span> <span class="nav-text">session logout</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL-v-s-NOSQL"><span class="nav-number">2.4.</span> <span class="nav-text">SQL v.s. NOSQL</span></a></li></ol></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Nelson</p>
  <div class="site-description" itemprop="description"></div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">6</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">categories</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">tags</span>
        </a>
      </div>
    
  </nav>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/yc0" title="GitHub &rarr; https://github.com/yc0" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:nelson.lin.tw@gmail.com" title="E-Mail &rarr; mailto:nelson.lin.tw@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
    
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nelson</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.4.0</div>

        












        
      </div>
    </footer>
  </div>

  


  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  <script src="/lib/pjax/pjax.min.js?v=0.2.8"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script>
<script src="/js/utils.js?v=7.4.0"></script><script src="/js/motion.js?v=7.4.0"></script>
<script src="/js/schemes/pisces.js?v=7.4.0"></script>
<script src="/js/next-boot.js?v=7.4.0"></script>
  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[pjax], script#page-configurations, #pjax script').forEach(element => {
    var id = element.id || '';
    var src = element.src || '';
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (id !=='') {
      script.id = element.id;
    }
    if (src !== '') {
      script.src = src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




















    <div id="pjax">

  

  

  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: 'a5fc1ce139416ecb08cd',
      clientSecret: '7c25b43f328e1e82fc5661a5d51f0f6b14ab1d0d',
      repo: 'yc0.github.io',
      owner: 'yc0',
      admin: ['yc0'],
      id: '6e5f46f2e2b698c1f4be56dd4b6c04d0',
        language: window.navigator.language || window.navigator.userLanguage,
      
      distractionFreeMode: 'true'
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
</script>

    </div>
</body>
</html>
